<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=lofyer><link href=https://docs.lofyer.org/blog/category/linux-admin/ rel=canonical><link href=../inthecloud/ rel=prev><link href=../modeling/ rel=next><link rel=icon href=../../../images/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.12"><title>linux-admin - Lofyer's Blog</title><link rel=stylesheet href=../../../assets/stylesheets/main.fad675c6.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.356b1318.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#linux-admin class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../.. title="Lofyer's Blog" class="md-header__button md-logo" aria-label="Lofyer's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Lofyer's Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> linux-admin </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/lofyer/lofyer.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lofyer/lofyer.github.io </div> </a> </div> </nav> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Index </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> 博客 </a> </li> <li class=md-tabs__item> <a href=../../../datanote/ class=md-tabs__link> Docs </a> </li> <li class=md-tabs__item> <a href=../../../about/about/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../template_password/ class=md-tabs__link> [密码保护]Template </a> </li> <li class=md-tabs__item> <a href=../../../tags/ class=md-tabs__link> Tags </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Lofyer's Blog" class="md-nav__button md-logo" aria-label="Lofyer's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Lofyer's Blog </label> <div class=md-nav__source> <a href=https://github.com/lofyer/lofyer.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lofyer/lofyer.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Index </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> 博客 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 博客 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> <span class=md-ellipsis> 首页 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../archive/2022/ class=md-nav__link> <span class=md-ellipsis> 归档 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 分类 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 分类 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../lab/ class=md-nav__link> <span class=md-ellipsis> Lab </span> </a> </li> <li class=md-nav__item> <a href=../abm/ class=md-nav__link> <span class=md-ellipsis> abm </span> </a> </li> <li class=md-nav__item> <a href=../ai/ class=md-nav__link> <span class=md-ellipsis> ai </span> </a> </li> <li class=md-nav__item> <a href=../cloud-infra/ class=md-nav__link> <span class=md-ellipsis> cloud-infra </span> </a> </li> <li class=md-nav__item> <a href=../collect/ class=md-nav__link> <span class=md-ellipsis> collect </span> </a> </li> <li class=md-nav__item> <a href=../devices/ class=md-nav__link> <span class=md-ellipsis> devices </span> </a> </li> <li class=md-nav__item> <a href=../diary/ class=md-nav__link> <span class=md-ellipsis> diary </span> </a> </li> <li class=md-nav__item> <a href=../draft/ class=md-nav__link> <span class=md-ellipsis> draft </span> </a> </li> <li class=md-nav__item> <a href=../filecoin/ class=md-nav__link> <span class=md-ellipsis> filecoin </span> </a> </li> <li class=md-nav__item> <a href=../followmyheart/ class=md-nav__link> <span class=md-ellipsis> followmyheart </span> </a> </li> <li class=md-nav__item> <a href=../fpga/ class=md-nav__link> <span class=md-ellipsis> fpga </span> </a> </li> <li class=md-nav__item> <a href=../hpc/ class=md-nav__link> <span class=md-ellipsis> hpc </span> </a> </li> <li class=md-nav__item> <a href=../inthecloud/ class=md-nav__link> <span class=md-ellipsis> inthecloud </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> linux-admin </span> </a> </li> <li class=md-nav__item> <a href=../modeling/ class=md-nav__link> <span class=md-ellipsis> modeling </span> </a> </li> <li class=md-nav__item> <a href=../my-books/ class=md-nav__link> <span class=md-ellipsis> my-books </span> </a> </li> <li class=md-nav__item> <a href=../mylife/ class=md-nav__link> <span class=md-ellipsis> mylife </span> </a> </li> <li class=md-nav__item> <a href=../new-world/ class=md-nav__link> <span class=md-ellipsis> new-world </span> </a> </li> <li class=md-nav__item> <a href=../others/ class=md-nav__link> <span class=md-ellipsis> others </span> </a> </li> <li class=md-nav__item> <a href=../ovs/ class=md-nav__link> <span class=md-ellipsis> ovs </span> </a> </li> <li class=md-nav__item> <a href=../tech/ class=md-nav__link> <span class=md-ellipsis> tech </span> </a> </li> <li class=md-nav__item> <a href=../%E4%BA%91%E8%AE%A1%E7%AE%97/ class=md-nav__link> <span class=md-ellipsis> 云计算 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Docs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Docs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../datanote/ class=md-nav__link> <span class=md-ellipsis> DataNote </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../inthecloud/ class=md-nav__link> <span class=md-ellipsis> InTheCloud </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../wangsheng/ class=md-nav__link> <span class=md-ellipsis> WangSheng </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../about/about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../../template_password/ class=md-nav__link> <span class=md-ellipsis> [密码保护]Template </span> </a> </li> <li class=md-nav__item> <a href=../../../tags/ class=md-nav__link> <span class=md-ellipsis> Tags </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <div class=md-content__inner> <header class=md-typeset> <h1 id=linux-admin>linux-admin</h1> </header> <article class="md-post md-post--excerpt"> <header class=md-post__header> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2017-06-02 00:00:00">2017年6月2日</time></li> <li class=md-meta__item> 分类于 <a href=../cloud-infra/ class=md-meta__link>cloud-infra</a>, <a href=./ class=md-meta__link>linux-admin</a>, <a href=../draft/ class=md-meta__link>draft</a></li> <li class=md-meta__item> 需要 1 分钟阅读时间 </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=opendedup><a href=../../2017/06/02/%E8%99%9A%E6%8B%9F%E5%8C%96%E5%B9%B3%E5%8F%B0%E9%95%9C%E5%83%8F%E5%8E%BB%E5%86%97%E6%B5%8B%E8%AF%95opendedup/ class=toclink>虚拟化平台镜像去冗测试（opendedup）</a></h2> <p>OpenDedup，是一款开源去重文件系统，https://github.com/opendedup/sdfs，可以分布式，支持NFS、iSCSI等，感觉非常厉害，作者是Veritas的银堡（Sam Silverberg）。</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>RedHat 7就开始带了VDO，但是还没测过。</p> </div> <p>可以去官网下载镜像，或者是笔者认为更加实用的NAS系统。</p> <h3 id=_1><a class=toclink href=../../2017/06/02/%E8%99%9A%E6%8B%9F%E5%8C%96%E5%B9%B3%E5%8F%B0%E9%95%9C%E5%83%8F%E5%8E%BB%E5%86%97%E6%B5%8B%E8%AF%95opendedup/#_1>简单测试</a></h3> <p>目的是减少更多本地环境占用，使用opendedup测试。</p> <ol> <li> <p>首先测试我新闻服务器上的数据，以索引文件为主，经常变动，有大有小。</p> </li> <li> <p>然后选择一款kvm软件平台。</p> </li> </ol> <p>安装：</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code>wget http://www.opendedup.org/downloads/sdfs-latest.deb
sudo dpkg -i sdfs-latest.deb

sudo su
echo &quot;* hardnofile 65535&quot; &gt;&gt; /etc/security/limits.conf
echo &quot;* soft nofile 65535&quot; &gt;&gt; /etc/security/limits.conf
exit
sudo mkfs.sdfs --volume-name=pool0 --volume-capacity=256GB
sudo mkdir /media/pool0 
sudo mount.sdfs pool0 /media/pool0/
</code></pre></div></td></tr></table></div> <p>数据拷贝进去后，原9.3GB索引数据降为8.5GB，效果不如想象中好。</p> <p>可能原因：</p> <p>sdfs提供了丰富的命令行选项，我没有使用，使用后可能会达到预期，比如更小的block。</p> <nav class=md-post__action> <a href=../../2017/06/02/%E8%99%9A%E6%8B%9F%E5%8C%96%E5%B9%B3%E5%8F%B0%E9%95%9C%E5%83%8F%E5%8E%BB%E5%86%97%E6%B5%8B%E8%AF%95opendedup/ > 继续阅读 </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2013-04-15 00:00:00">2013年4月15日</time></li> <li class=md-meta__item> 分类于 <a href=../ai/ class=md-meta__link>ai</a>, <a href=./ class=md-meta__link>linux-admin</a>, <a href=../others/ class=md-meta__link>others</a></li> <li class=md-meta__item> 需要 1 分钟阅读时间 </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=rex><a href=../../2013/04/15/rex%E8%AE%BE%E8%AE%A1/ class=toclink>Rex设计</a></h2> <p><a href=https://blog.loyfer.org/wp-content/uploads/2013/04/rex-11.png><img alt=rex-1 src=/blog/images/rex-11.png></a></p> <p>目前已完成 capture，dlayer和tlayer。 IplImage 和 Mat转换可考虑不用了 在写交互的部分，后期完成可能会用gtk。 需要的传感器： 加速度（FPV向） ROI：移动检测 抛弃gtk（时间长，没意思），转用ncurses</p> <nav class=md-post__action> <a href=../../2013/04/15/rex%E8%AE%BE%E8%AE%A1/ > 继续阅读 </a> </nav> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2012-09-18 00:00:00">2012年9月18日</time></li> <li class=md-meta__item> 分类于 <a href=./ class=md-meta__link>linux-admin</a></li> <li class=md-meta__item> 需要 9 分钟阅读时间 </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=_1><a href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/ class=toclink>实用笔记</a></h2> <h3 id=webframework><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#webframework>WebFramework:</a></h3> <p>Django Cappuccino-&gt;mockingbird</p> <h3 id=tab><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#tab>搜索Tab</a></h3> <p>grep -P "t"</p> <h3 id=_2><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#_2>批量替换</a></h3> <p>sed -i "s/qwe/asd/g" `grep -rl "qwe"`</p> <h3 id=cmake-opencvlibpkg-configopencvpcusrlibpkg-configpkg-config><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#cmake-opencvlibpkg-configopencvpcusrlibpkg-configpkg-config>cmake 配置安装完opencv后，将安装路径中到lib/pkg-config/opencv.pc复制到/usr/lib/pkg-config，然后可以进行pkg-config 查找</a></h3> <h3 id=gnome3><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#gnome3>gnome3任务栏快捷方式的存放位置拖到浏览器或者终端里你就看见了。。</a></h3> <h3 id=curl-post><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#curl-post>curl POST</a></h3> <p>curl -X POST -d '4142430A02000' http://user:pass@myhost/hudson/job/_jobName_/postBuildResult</p> <p>curl -X POST -d @myfilename http://user:pass@myhost/hudson/job/_jobName_/postBuildResult</p> <h3 id=ddwrt><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ddwrt>ddwrt 内网不能访问内网域名</a></h3> <p>iptables -t nat -I POSTROUTING -o br0 -s 192.168.0.188/24 -d 192.168.0.188/24 -j MASQUERADE</p> <h3 id=vpn><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#vpn>vpn的内网的问题</a></h3> <p>iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j SNAT --to-source 70.8.7.6</p> <p>iptables -t nat -A POSTROUTING -o eth0 -s 172.16.1.0/24 -j MASQUERADE</p> <h3 id=delete-git-branch><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#delete-git-branch>delete git branch</a></h3> <p>git push origin :yourbranch</p> <h3 id=ipa-client-reinstall><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ipa-client-reinstall>ipa client reinstall</a></h3> <p>删除_/etc/ipa/ca.crt_证书</p> <h3 id=fedoracd><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#fedoracd>fedora制作安装cd</a></h3> <h2 id=binbash><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#binbash>!/bin/bash</a></h2> <p>livecd-creator --config=/usr/share/spin-kickstarts/fedora-livecd-desktop.ks \ --fslabel=Test \ --tmpdir=/root/iso/tmp \ --cache=/root/iso/cache \ --nocleanup \ --cacheonly #为节约下载时间可在以后制作时忽略</p> <h3 id=mysql-grant><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#mysql-grant>mysql grant</a></h3> <p>grant all privileges on *.* to root@'%' identified by '123456'; flush privileges;</p> <h3 id=kvm-nested><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#kvm-nested>打开kvm nested参数</a></h3> <p>cat /sys/module/kvm_intel/parameters/nested</p> <p>为N则</p> <p>modprobe -r kvm-intel modprobe kvm-intel nested=1</p> <h3 id=fedora-rawhide><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#fedora-rawhide>Fedora滚动升级版 Rawhide</a></h3> <p>yum install fedora-release-rawhide yum-config-manager --disable fedora updates updates-testing yum-config-manager --enable rawhide yum update yum yum --releasever=rawhide distro-sync --nogpgcheck</p> <p>or</p> <p>dnf upgrade --refresh dnf install dnf-plugin-system-upgrade dnf system-upgrade download --refresh --releasever=rawhide --allowerasing dnf system-upgrade reboot</p> <h3 id=opensuse-tumbleweed><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#opensuse-tumbleweed>Opensuse滚动升级版 Tumbleweed</a></h3> <p>zypper ar --refresh http://download.opensuse.org/repositories/openSUSE:/Tumbleweed/standard/ Tumbleweed zypper ar --refresh http://download.opensuse.org/distribution/openSUSE-current/repo/oss/ 'openSUSE Current OSS' zypper ar --refresh http://download.opensuse.org/distribution/openSUSE-current/repo/non-oss/ 'openSUSE Current non-OSS' zypper ar --refresh http://download.opensuse.org/update/openSUSE-current/ 'openSUSE Current updates' zypper ar --refresh http://download.opensuse.org/update/openSUSE-non-oss-current/ 'openSUSE Current non-OSS updates' zypper dup</p> <h3 id=vs2012><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#vs2012>vs2012修复补丁</a></h3> <p>由于升级.net 4.5会出现vs2012部分项目失败，可以打这个补丁修复 <a href="http://www.microsoft.com/zh-cn/download/details.aspx?id=36020" title="http://www.microsoft.com/zh-cn/download/details.aspx?id=36020">Microsoft Visual Studio 2012 更新 (KB2781514)</a></p> <h3 id=restclient><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#restclient>RESTClient</a></h3> <p>针对RESTful的API可以使用这个工具 <a href=http://restclient.org title=http://restclient.org>http://restclient.org</a></p> <h3 id=dl-sslgooglecom><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#dl-sslgooglecom>dl-ssl.google.com</a></h3> <p>74.125.237.1</p> <h3 id=owncloud-repo><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#owncloud-repo>owncloud repo</a></h3> <p>http://software.opensuse.org/download/package?project=isv:ownCloud:devel&amp;package=owncloud-client</p> <h3 id=android-google-play><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#android-google-play>android google play</a></h3> <p>cp /data/app/googleplay /system/app/</p> <h3 id=gravatar><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#gravatar>获取Gravatar头像</a></h3> <p>curl http://www.gravatar.com/avatar/`echo -n me@mydomain.com | md5sum` &gt; gravatar.jpg</p> <h3 id=maven-insecure-ssl><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#maven-insecure-ssl>Maven insecure SSL</a></h3> <p>-Dmaven.wagon.http.ssl.insecure=true -Dmaven.wagon.http.ssl.allowall=true</p> <h3 id=bvnc-build><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#bvnc-build>bVNC build</a></h3> <p>FreeRDP: checkout dbbb341; cmake .; ant release Singed keystore: keytool -genkey -alias android.keystore -keyalg RSA -validity 20000 -keystore android.keystore http://www.mail-archive.com/spice-devel@lists.freedesktop.org/msg13763.html</p> <h3 id=ipa-add-user><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ipa-add-user>IPA ADD-USER</a></h3> <h2 id=binbash_1><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#binbash_1>!/bin/bash</a></h2> <p>echo -e "pswd4admin\n" | kinit admin echo -e "<span class=arithmatex>\(1\\n\)</span>1\n<span class=arithmatex>\(1\\n" | ipa user-add echo -e "\)</span>1\n<span class=arithmatex>\(1\\n" | ipa passwd <span class=arithmatex>\(1 sleep 1 echo -e "\)</span>1\\n\)</span>1\n$1\n" | kinit $1</p> <h3 id=ntp-server><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ntp-server>NTP server</a></h3> <p>server 192.168.1.11 mask 255.255.0.0 nomodify 启动ntpd后要等个几分钟，client才能去同步，否则报错说未找到合适的ntp服务器</p> <h3 id=rsync><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#rsync>rsync</a></h3> <p>rsync -zvrtopgal -e ssh --delete --stats --progress --exclude 'ignore.txt' root@lofyer.org:/var/log /home/lofyer/lofyer.org/</p> <h3 id=centos-smartcard><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#centos-smartcard>CentOS Smartcard</a></h3> <p>SmartCard service: openct pcscd</p> <h3 id=zathura><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#zathura>zathura</a></h3> <p>很好的PDF阅读器</p> <h3 id=ssh-without-password><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ssh-without-password>ssh without password</a></h3> <h2 id=generate-rsa-key-pair-without-passphrase><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#generate-rsa-key-pair-without-passphrase>Generate rsa key pair without passphrase</a></h2> <p>[demo@A ~]$ ssh-keygen -t rsa</p> <h2 id=copy-pub-key-to-b><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#copy-pub-key-to-b>Copy pub key to B</a></h2> <p>[demo@A ~]$ cat .ssh/id_rsa.pub | ssh alpha@B 'cat &gt;&gt; .ssh/authorized_keys2'</p> <h2 id=add-private-key-to-a><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#add-private-key-to-a>Add private key to A</a></h2> <p>[demo@A ~]$ ssh-add ~/.ssh/id_rsa or just [demo@A ~]$ ssh-copy-id alpha@B</p> <h3 id=ssh-to-a-new-host-without-key-checking-promption><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ssh-to-a-new-host-without-key-checking-promption>ssh to a new host without key checking promption</a></h3> <h2 id=vim-etcsshssh_config><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#vim-etcsshssh_config>vim /etc/ssh/ssh_config</a></h2> <p>... StrictHostKeyChecking no ...</p> <h3 id=debian-offcie><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#debian-offcie>debian offcie乱码</a></h3> <p>安装文泉逸字体 apt-get install fonts-wenquanyi</p> <h3 id=debian-virt-viewer-with-spice><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#debian-virt-viewer-with-spice>debian virt-viewer with spice</a></h3> <p>deb http://mirrors.163.com/debian/ unstable main deb-src http://mirrors.163.com/debian/ unstable main</p> <p>deb http://security.debian.org/ unstable/updates main deb-src http://security.debian.org/ unstable/updates main</p> <h2 id=unstable-updates-previously-known-as-volatile><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#unstable-updates-previously-known-as-volatile>unstable-updates, previously known as 'volatile'</a></h2> <p>deb http://mirrors.163.com/debian/ unstable-updates main deb-src http://mirrors.163.com/debian/ unstable-updates main deb http://apt.wxwidgets.org/ unstable-wx main deb-src http://apt.wxwidgets.org/ unstable-wx main</p> <h3 id=better-dns><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#better-dns>Better DNS</a></h3> <p>dns1: 199.91.73.222 dns2: 8.8.8.8</p> <h3 id=audit-log><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#audit-log>audit log</a></h3> <p>Modify <em>/etc/audit/audit.conf</em> to 8192 or bigger.</p> <h3 id=memcached><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#memcached>memcached</a></h3> <p><strong>PHP</strong></p> <h2 id=apt-get-install-memcached-php5-memcached><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#apt-get-install-memcached-php5-memcached>apt-get install memcached php5-memcached</a></h2> <p>modify <em>/etc/php5/conf.d/memcached.ini</em></p> <h3 id=disable-tso-gso-to-improve-virtio-net><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#disable-tso-gso-to-improve-virtio-net>disable TSO GSO to improve virtio-net</a></h3> <h2 id=ethtool-k-eth0-gso-off><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ethtool-k-eth0-gso-off>ethtool -K eth0 gso off</a></h2> <h2 id=ethtool-k-eth0-tso-off><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ethtool-k-eth0-tso-off>ethtool -K eth0 tso off</a></h2> <h3 id=disable-packagekit-in-fedora><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#disable-packagekit-in-fedora>disable PackageKit in Fedora</a></h3> <p><em>/etc/yum/pluginconf.d/refresh-packagekit.conf</em></p> <p>enabled=0</p> <h3 id=_3><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#_3>推荐一种工作方式</a></h3> <p>集成显卡下运行linux，将另一块硬盘或者vdisk，还有独立显卡passthrough给虚拟机Win7，协议使用spice，这是很爽啊</p> <h3 id=crt-key-to-pem><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#crt-key-to-pem>crt &amp; key to pem</a></h3> <p>openssl x509 -inform DER -outform PEM -in server.crt -out server.crt.pem openssl rsa -inform DER -outform PEM -in server.key -out server.key.pem cat server.crt.pem server.key.pem &gt;&gt; server.pem</p> <h3 id=wireless-relay-for-tomata><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#wireless-relay-for-tomata>wireless relay for tomata</a></h3> <p>设置无线中继时确保主路由和从路由的SSID、密码、加密方式一致，不要使用WPA/WPA-2混合模式</p> <h3 id=libvirt-password><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#libvirt-password>libvirt password</a></h3> <h2 id=saslpasswd2-a-libvirt-root><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#saslpasswd2-a-libvirt-root>saslpasswd2 -a libvirt root</a></h2> <h3 id=netcatnc-tips><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#netcatnc-tips>netcat(nc) tips</a></h3> <p><strong>大传输文件(file transfer)</strong></p> <p>server: nc -l 5555 &lt; file_to_copy client: nc server_ip 5555 &gt; new_file</p> <p><strong>聊天(chat)</strong></p> <p>client1: nc -l 5555 client2: nc server_ip 5555</p> <p><strong>udp connection</strong></p> <p>server: nc -4 -u -l 5555 clinet: nc -4 -u localhost 5555</p> <h3 id=owncloud-repo_1><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#owncloud-repo_1>owncloud repo</a></h3> <p>[isv_ownCloud_community] name=Latest stable community release of ownCloud (CentOS_CentOS-6) type=rpm-md baseurl=http://download.opensuse.org/repositories/isv:/ownCloud:/community/CentOS_CentOS-6/ gpgcheck=1 gpgkey=http://download.opensuse.org/repositories/isv:/ownCloud:/community/CentOS_CentOS-6/repodata/repomd.xml.key enabled=1</p> <h3 id=gnome-terminal-proxy><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#gnome-terminal-proxy>gnome terminal proxy</a></h3> <p>$ ssh -ND 7070 yourname@yourserver $ gconftool-2 -R /system/proxy # show configuration $ gconftool-2 -s /system/proxy/socks_host -t int 127.0.0.1 $ gconftool-2 -s /system/proxy/socks_port -t int 7070 $ gconftool-2 -s /system/proxy/mode -t string manual # enable $ gconftool-2 -s /system/proxy/mode -t string none # disable</p> <h3 id=update-xcode-cmd><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#update-xcode-cmd>update xcode cmd</a></h3> <h2 id=xcode-select-install><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#xcode-select-install>xcode-select --install</a></h2> <h3 id=test-linux-watchdog><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#test-linux-watchdog>Test linux watchdog</a></h3> <h2 id=echo-c-procsysrq-trigger><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#echo-c-procsysrq-trigger>echo c &gt; /proc/sysrq-trigger</a></h2> <h3 id=bash><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#bash>Bash环境变量漏洞检测</a></h3> <p>env x='() { :;}; echo asdasd' bash -c "echo asd"</p> <h3 id=maven-socks5-proxy><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#maven-socks5-proxy>maven socks5 proxy</a></h3> <p>-DsocksProxyHost=127.0.0.1 -DsocksProxyPort=7070</p> <h3 id=when-your-vm-has-2-ethernet-do-noticed-which-one-is-the-default-gateway-or-you-will-fail-in-router-port-forwarding><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#when-your-vm-has-2-ethernet-do-noticed-which-one-is-the-default-gateway-or-you-will-fail-in-router-port-forwarding>When your vm has 2 ethernet, DO noticed which one is the default gateway, or you will fail in ROUTER PORT FORWARDING.</a></h3> <h3 id=delete-raid-info-in-your-disk><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#delete-raid-info-in-your-disk>Delete RAID info in your disk</a></h3> <h2 id=dmraid-n-devsda><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#dmraid-n-devsda>dmraid -n /dev/sda</a></h2> <p>DDF1 Anchor at 12345678</p> <h2 id=dd-ifdevzero-ofdevsda-seek12345678-bs512-count1><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#dd-ifdevzero-ofdevsda-seek12345678-bs512-count1>dd if=/dev/zero of=/dev/sda seek=12345678 bs=512 count=1</a></h2> <h3 id=postgresql-recovery-when-xlog-failed><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#postgresql-recovery-when-xlog-failed>Postgresql recovery when xlog failed</a></h3> <p>$ pg_resetxlog -f -x 0x9A00000 -m 0x10000 -O 0x10000 -l 0x1,0xB67,0x58 -D /var/lib/pgsql/data or $ pg_resetxlog -f /var/lib/pg_sql/data Transaction log reset</p> <h3 id=mysqlphp><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#mysqlphp>解决mysql＋php中文显示问号问题</a></h3> <p>比如在vtigercrm，zabbix中</p> <p>创建utf8排序的数据库即可</p> <h2 id=mysql><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#mysql>mysql</a></h2> <blockquote> <p>create database mydb DEFAULT CHARSET utf8 COLLATE utf8_general_ci;</p> </blockquote> <h3 id=mysql-delete-duplicated-rows><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#mysql-delete-duplicated-rows>Mysql delete duplicated rows</a></h3> <p>delete from posts where id not in (select * from (select max(n.id) from posts n group by n.title) x);</p> <p>OR</p> <p>create table new as select * from posts where 1 group by url; rename table new master;</p> <h3 id=pip-upgrade-all><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#pip-upgrade-all>pip upgrade all</a></h3> <p>pip freeze --local | grep -v '^\-e' | cut -d = -f 1 | xargs -n1 pip install -U</p> <h3 id=wget><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#wget>wget 递归下载</a></h3> <p>wget -c -r -np -k -L -p http://example.com/dir0/</p> <h3 id=gem><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#gem>修改gem源</a></h3> <p>$ gem sources --remove https://rubygems.org/ $ gem sources -a https://ruby.taobao.org/ $ gem sources -l *** CURRENT SOURCES ***</p> <p>https://ruby.taobao.org</p> <h2 id=rubytaobaoorg><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#rubytaobaoorg>请确保只有 ruby.taobao.org</a></h2> <h3 id=extundeleterm-fr><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#extundeleterm-fr>使用extundelete恢复rm -fr数据</a></h3> <p>从<a href=http://extundelete.sourceforge.net/ >http://extundelete.sourceforge.net/</a>下载源码，安装efs2progs-devel并编译。</p> <h2 id=mount-devsdb2-mnt-o-ro><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#mount-devsdb2-mnt-o-ro>mount /dev/sdb2 /mnt -o ro</a></h2> <h2 id=extundelete-devsdb2-restore-files-relative-path-to-files-after-20140404><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#extundelete-devsdb2-restore-files-relative-path-to-files-after-20140404>extundelete /dev/sdb2 --restore-files relative-path-to-files --after 20140404</a></h2> <p>OR</p> <h2 id=extundelete-devsdb2-restore-all><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#extundelete-devsdb2-restore-all>extundelete /dev/sdb2 --restore-all</a></h2> <h3 id=testdiskphotorec><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#testdiskphotorec>使用TestDisk/PhotoRec恢复分区/数据</a></h3> <p>从<a href=http://www.cgsecurity.org/wiki/TestDisk>http://www.cgsecurity.org/wiki/TestDisk</a>下载TestDisk，解压后会发现源码以及静态编译文件，直接执行即可，其中TestDisk恢复分区，PhotoRec恢复图片文件。</p> <h3 id=wordpress-excerpt_length><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#wordpress-excerpt_length>Wordpress 摘要字数搜索关键字excerpt_length</a></h3> <h3 id=eclipse-multiuser><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#eclipse-multiuser>Eclipse multiuser</a></h3> <p>Add following code to your eclipse/configuration/config.ini</p> <p>osgi.configuration.area=@user.home/Eclipse/configuration osgi.sharedConfiguration.area=/opt/eclipse/configuration osgi.configuration.cascaded=true</p> <h3 id=get-cer-and-key-out-of-pfx><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#get-cer-and-key-out-of-pfx>get cer and key out of pfx</a></h3> <p>openssl pkcs12 -in domain.pfx -clcerts -nokeys -out domain.cer openssl pkcs12 -in domain.pfx -nocerts -nodes -out domain.key</p> <h3 id=opensslgpg-encryptdecrypt><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#opensslgpg-encryptdecrypt>openssl/gpg encrypt/decrypt</a></h3> <p>$ echo Hi | openssl enc -aes-128-cbc -a -salt -pass pass:wtf U2FsdGVkX18qAdhqop1SffsewHue6EOPNKv9dXc/0rI= $ echo U2FsdGVkX18qAdhqop1SffsewHue6EOPNKv9dXc/0rI= | openssl enc -aes-128-cbc -a -d -salt -pass pass:wtf Hi</p> <p>OR</p> <h2 id=generate-a-2048-bit-rsa-key-and-store-it-in-keytxt><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#generate-a-2048-bit-rsa-key-and-store-it-in-keytxt>generate a 2048-bit RSA key and store it in key.txt</a></h2> <p>openssl genrsa -out key.txt 2048</p> <h2 id=encrypt-hello-world-using-the-rsa-key-in-keytxt><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#encrypt-hello-world-using-the-rsa-key-in-keytxt>encrypt "hello world" using the RSA key in key.txt</a></h2> <p>echo "hello world" | openssl rsautl -inkey key.txt -encrypt &gt;output.bin</p> <h2 id=decrypt-the-message-and-output-to-stdout><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#decrypt-the-message-and-output-to-stdout>decrypt the message and output to stdout</a></h2> <p>openssl rsautl -inkey key.txt -decrypt OR</p> <p>gpg --encrypt -r recipient@example.com &gt;tempfile gpg --decrypt </p> <h3 id=ssh-port-forward><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ssh-port-forward>ssh port forward</a></h3> <h2 id=local-forwarding-with-g-to-share-the-local-port-with-other-hosts><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#local-forwarding-with-g-to-share-the-local-port-with-other-hosts>Local Forwarding, with -g to share the local port with other hosts</a></h2> <p>(localpc)$ ssh -g -L 2222:localhost:22 root@lofyer.org</p> <h2 id=ssh-to-localhost2222-to-connect-lofyerorg><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ssh-to-localhost2222-to-connect-lofyerorg>ssh to localhost:2222 to connect lofyer.org</a></h2> <p>(localpc)$ ssh -lroot -p 2222 localhost</p> <h2 id=remote-forwarding><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#remote-forwarding>Remote Forwarding</a></h2> <p>(localpc)$ ssh -R -L 2222:localhost:22 root@lofyer.org</p> <h2 id=on-host-lofyerorg-ssh-to-localhost2222-to-connect-localpc><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#on-host-lofyerorg-ssh-to-localhost2222-to-connect-localpc>On host lofyer.org, ssh to localhost:2222 to connect localpc.</a></h2> <p>(lofyer.org)$ ssh localhost -p 2222</p> <h2 id=mixed-localpc22-lofyerorg2222><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#mixed-localpc22-lofyerorg2222>Mixed, localpc:22-&gt;lofyer.org:2222</a></h2> <h2 id=on-lofyerorg-we-make-a-tunnel2222-to-localpc22><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#on-lofyerorg-we-make-a-tunnel2222-to-localpc22>On lofyer.org we make a tunnel(2222) to localpc:22</a></h2> <p>(localpc)$ ssh -R 2222:localhost:22 lofyer.org</p> <h2 id=make-a-local-tunnel3333-listening-on-all-interface-to-localpc2222><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#make-a-local-tunnel3333-listening-on-all-interface-to-localpc2222>Make a local tunnel(3333) listening on all interface to localpc:2222</a></h2> <p>(lofyer.org)$ ssh -g -L 3333:localhost:2222 localhost</p> <h2 id=ssh-to-lofyerorg3333-to-connect-localpc22><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ssh-to-lofyerorg3333-to-connect-localpc22>ssh to lofyer.org:3333 to connect localpc:22</a></h2> <p>(localpc) ssh lofyer.org -p 3333</p> <h2 id=dynamic-forwarding-with-cn-to-compress-data-and-close-terminal-input><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#dynamic-forwarding-with-cn-to-compress-data-and-close-terminal-input>Dynamic Forwarding, with -CN to compress data and close terminal input.</a></h2> <h2 id=to-start-a-socks-v4v5-server-on-localhost7777><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#to-start-a-socks-v4v5-server-on-localhost7777>To start a SOCKS v4/v5 server on localhost:7777</a></h2> <h2 id=then-you-can-use-this-as-a-proxy-for-your-browser><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#then-you-can-use-this-as-a-proxy-for-your-browser>Then you can use this as a proxy for your browser.</a></h2> <p>(localpc)$ ssh -CND 7777 root@lofyer.org</p> <h3 id=export-private-key-of-iis-that-cannot-be-exported><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#export-private-key-of-iis-that-cannot-be-exported>Export private key of IIS that cannot be exported</a></h3> <ol> <li>git clone https://github.com/iSECPartners/jailbreak-Windows.git</li> <li>Run mcc.msc, add Cert, save this MCC as a file(i.e. aaa).</li> <li>Run jailbreak64.exe mcc.msc aaa</li> <li>Then you can export the private key from the cert.</li> </ol> <h3 id=iptables-route-to-local-pc><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#iptables-route-to-local-pc>iptables route to local pc</a></h3> <p>iptables -t nat -A PREROUTING -p tcp --dport 5060:5081 -j DNAT --to-destination 192.168.122.222:5060:5081</p> <p><strong>Change vm root password</strong></p> <p>virt-sysprep --root-password password:123456 -a os.img</p> <h3 id=ubuntu-ap-hotspot-ppa><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ubuntu-ap-hotspot-ppa>Ubuntu ap-hotspot PPA</a></h3> <p>sudo add-apt-repository ppa:nilarimogard/webupd8 sudo apt-get update sudo apt-get install ap-hotspot</p> <h3 id=io-error><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#io-error>恢复IO ERROR文件</a></h3> <p>dd if=ioerror.file of=file bs=1M conv=noerror</p> <h3 id=qemu-lsi-scsi><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#qemu-lsi-scsi>QEMU LSI SCSI</a></h3> <p>qemu-kvm -m 1024 -drive file=centos58-RAW.img,index=0,if=scsi,format=raw -boot c -net nic -net user -nographic -vnc :1 -option-rom 8xx_64.rom,bootindex=1</p> <p><a href=http://blog.lofyer.org/quick-notes/lsi_bios/ >lsi_bios 下载</a></p> <h3 id=yum-remove-nodeps><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#yum-remove-nodeps>yum remove nodeps</a></h3> <p>rpm -e --nodpes PKG yum install PKG</p> <h3 id=file-too-large><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#file-too-large>File too large</a></h3> <p>ulimit -n 102400 ulimit -f 102400</p> <h3 id=http-refresh><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#http-refresh>HTTP REFRESH</a></h3> <p><meta http-equiv=REFRESH content="0; url=/SOGo/"></p> <h3 id=autoreconf><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#autoreconf>AUTORECONF</a></h3> <p>autoreconf -i</p> <h3 id=rpi-x11vnc-auto-start-and-prevent-screen-from-sleeping><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#rpi-x11vnc-auto-start-and-prevent-screen-from-sleeping>RPi x11vnc auto start and prevent screen from sleeping</a></h3> <p>pi@raspberrypi:~ $ cat .config/lxsession/LXDE-pi/autostart @lxpanel --profile LXDE-pi @pcmanfm --desktop --profile LXDE-pi @xscreensaver -no-splash x11vnc -auth /home/pi/.Xauthority -display :0 @xset s noblank @xset s off @xset -dpms</p> <h3 id=crawl-date-yesterday><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#crawl-date-yesterday>Crawl date yesterday</a></h3> <p>select id,title,content,url,date_format(str_to_date(date, '%d-%M-%Y'), '%Y%m%d') as date_new from posts where date_format(str_to_date(date, '%d-%M-%Y'), '%Y%m%d')=curdate()+0-1;</p> <h3 id=simple-php-server><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#simple-php-server>Simple PHP server</a></h3> <p>php -S 127.0.0.1:80 -t .</p> <h3 id=macos-reinstall><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#macos-reinstall>MacOS reinstall</a></h3> <h2 id=format-u-disk-at-first-with><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#format-u-disk-at-first-with>Format U disk at first with 区分大小写，日志式</a></h2> <h2 id=volumeinstall-osxinstall-osxappcontentsresourcescreateinstallmedia-volume-volumeinstall-applicationpath-volumeinstall-osxosxapp><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#volumeinstall-osxinstall-osxappcontentsresourcescreateinstallmedia-volume-volumeinstall-applicationpath-volumeinstall-osxosxapp>/Volume/Install\ OSX/Install\ OSX.app/Contents/Resources/createinstallmedia --volume /Volume/install --applicationpath /Volume/Install\ OSX/OSX.app</a></h2> <h3 id=mysql-select-items-yesterday><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#mysql-select-items-yesterday>MySQL select items yesterday</a></h3> <p>select id,title,content,url,date_format(str_to_date(date, '%d-%M-%Y'), '%Y%m%d') as date_new from posts where date_format(str_to_date(date, '%d-%M-%Y'), '%Y%m%d')=curdate()+0-1;</p> <h3 id=macos-all-source><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#macos-all-source>MACOS all source</a></h3> <h2 id=macos><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#macos>macOS 允许所有来源</a></h2> <p>sudo spctl --master-disable</p> <h3 id=wp-github-all-repos-limit><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#wp-github-all-repos-limit>wp-github all repos limit</a></h3> <p>120 public function get_repositories() { 121 $contents = $this-&gt;get_response('users/' . $this-&gt;username . '/repos?per_page=100');</p> <h3 id=iconicwidget><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#iconicwidget>修改iconic右侧widget超链接颜色</a></h3> <p>.widget-area .widget a { /*color: #757575;*/ text-decoration:none; font-size: 98%; }</p> <h3 id=cpu-ipc-usage-4-wide-cpu><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#cpu-ipc-usage-4-wide-cpu>CPU IPC usage 4-wide CPU</a></h3> <p>perf stat -a -- sleep 10</p> <p>Linux, when adding a new disc</p> <p>First find your host bus number</p> <p>grep mpt /sys/class/scsi_host/host?/proc_name</p> <p>Which should return a line like</p> <p>/sys/class/scsi_host/host0/proc_name:mptspi</p> <p>where host0 is the relevant field.</p> <p>use this to rescan the bus with the following command</p> <p>echo "- - -" &gt; /sys/class/scsi_host/host0/scan</p> <p>In the above command the the hyphens represent controller,channel,lun, so – – – indicates all controllers, all channels and all luns should be scanned.</p> <h3 id=ensenp-rename-to-eth0><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#ensenp-rename-to-eth0>ens/enp rename to eth0</a></h3> <p>Edit /etc/default/grub At the end of GRUB_CMDLINE_LINUX line append "net.ifnames=0 biosdevname=0" Save the file Type "grub2-mkconfig -o /boot/grub2/grub.cfg" Type "reboot"</p> <h3 id=change-mysql-database-or-table-encoding><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#change-mysql-database-or-table-encoding>Change mysql database or table encoding</a></h3> <p>SELECT neutron_ml2; ALTER DATABASE neutron_ml2 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ALTER TABLE standardattributes CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</p> <p>Or if you're still on MySQL 5.5.2 or older which didn't support 4-byte UTF-8, use utf8 instead of utf8mb4:</p> <p>ALTER DATABASE databasename CHARACTER SET utf8 COLLATE utf8_unicode_ci; ALTER TABLE tablename CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;</p> <h3 id=google-pixel-2-network-x-symbol><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#google-pixel-2-network-x-symbol>Google Pixel 2 network "X" symbol</a></h3> <h3 id=adb-shell-settings-put-global-captive_portal_https_url-httpscaptivev2excogenerate_204><a class=toclink href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/#adb-shell-settings-put-global-captive_portal_https_url-httpscaptivev2excogenerate_204>./adb shell "settings put global captive_portal_https_url https://captive.v2ex.co/generate_204";</a></h3> <p>title: "transfer IPv6 to IPv4 via socat" date: 2018-10-09 categories: - "linux-admin"</p> <hr> <p>Suppose that you have an ipv6-only server A with ip [ipv6-A], and ipv4-ipv6 server B with ip (ipv4-B, [ipv6-B]).</p> <p>If you wanna visit http://[ipv6-A]:80, but your ISV does not provide some ipv6 addresses. Now then, you'll make B be your "ipv6-ipv4 relay server" with following guide.</p> <p>If TCP:</p> <p>root@B:~# socat tcp4-listen:2222,fork tcp6:[2001:19f0:7001:5a34:5400:01ff:feb5:5bcd]:80</p> <p>If UDP:</p> <p>root@B:~# socat udp4-listen:2222,fork udp6:[2001:19f0:7001:5a34:5400:01ff:feb5:5bcd]:80</p> <p>Now you can visit http://ipv4-B:2222 to access http://[ipv6-A]:80</p> <nav class=md-post__action> <a href=../../2012/09/18/%E5%AE%9E%E7%94%A8%E7%AC%94%E8%AE%B0/ > 继续阅读 </a> </nav> </div> </article> <nav class=md-pagination> </nav> </div> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2008 - 2022 lofyer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.prune"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../assets/javascripts/bundle.6c14ae12.min.js></script> <script src=../../../javascripts/config.js></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>