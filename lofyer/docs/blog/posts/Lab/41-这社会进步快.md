---
title: "虚拟桌面中通过RDMA进行GPU跨节点调用从而加速渲染"
date: 2021-01-06
categories: 
  - "cloud-infra"
  - "tech"
---

# 虚拟桌面中通过RDMA进行GPU跨节点调用从而加速渲染

许久没关注过VDI了，一直坚持的观点就是协议要牛逼，否则就是渣。

VOI、IDV都不太行，GPU本机显示还是有些小问题，要么远程的，要么就没有虚拟化。

直到离开VDI行业三年多后发现还有这个炫酷的东西满足了当时我对单机虚拟化的期望，https://looking-glass.io，虚拟机与宿主机可以共享显示（iGPU），或者独占显示但是键鼠仍然与原生一致。

PS：ArchLinux社区万岁，[这是原文](https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E4%BD%BF%E7%94%A8Looking_Glass%E5%B0%86%E5%AE%A2%E6%88%B7%E6%9C%BA%E7%94%BB%E9%9D%A2%E6%B5%81%E5%BC%8F%E4%BC%A0%E8%BE%93%E5%88%B0%E5%AE%BF%E4%B8%BB%E6%9C%BA)。

之前Intel的老板说用iGVT可以，但是仅限于Intel集显，没有可复制性。现在发现这玩意儿以后，关于边缘计算的场景真的又可以展开一些了，朋友，之前机场工控机虚拟化管理还要大屏的需求我们再聊一聊？

原理说复杂也不复杂，作者思路从被广泛采用的桌面截取（OBS、DX API、NVIDIA Stream）到共享内存（IVSHMEM），纯内存交换。

很有意义，远程桌面协议换成共享内存协议，然后可以进一步用RDMA，再配上virtio-gpu，就可以跨节点渲染了，虚拟化版本的virgl。
